{% extends "base.html" %}

{% load static %}

  {% block head_title %}
    <title>Log In!</title>
  {% endblock %}  

  <meta name="description" content="Our first page">

  {% block css_links %}
    <link rel="stylesheet" type="text/css" href="{% static 'userLoginApp/css/userLogin.css' %}">

  {% endblock %}

  <!-- CONSIDER USING BOOTSTRAP FLOATING FORM LABELS FOR A BETTER LOOK -->
  {% block content %}
    <div class="d-flex flex-column align-items-center my-5 mx-2 footer-padding-fix">

      
      
      <div class="w-25">
        
        <div id="closable-popup-container" class="d-flex justify-content-center">
  
        </div>


        <!-- Submits to the save_new_user path in urls.py in the redAlertSite folder. Takes optional args parameter. Add a space and include the argument. -->
        <form action="{% url 'loginAppUrls:auth_user_login' %}" method="post">
          <!-- Protects against Cross Site Request Forgeries -->
          {% csrf_token %}

          <div>
            <span> Username: </span>
            <input type="text" id="user-name" class="form-control" name="user-name"> </input>
          </div>

          <div>
            <span> Password: </span>
            <input type="password" id="user-pass" class="form-control" name="user-pass">  </input>
          </div>


          <div class="d-flex flex-row-reverse mt-2">
            <input type="submit" class="btn btn-success" value="Log in!">
          </div>
         
        </form>
      </div>

      <div>
        <button type="button" class="btn btn-primary"> <a style="color: black;" href="{% url 'loginAppUrls:create_new_user'%}"> Create new account! </a> </button> 
      </div>

    </div>


    <!-- HIDDEN INPUTS -->
    <input type="hidden" value="true" id="on-login-page">

  {% endblock %}


{% block js_links %}
    <script src="{% static 'userLoginApp/js/userLogin.js' %}" > console.log("FYUFUUIASFDIBUABIUSFIBUNASFNUIBHJ BAS")</script> 

    <!-- Hackyish way to warn user why they were redirected to the login page. Calls function in global.js -->
    {% if changed_pass %}
      <script>
        createClosablePopup(message='You successfully changed your password!', targetID='closable-popup-container', color='#19E412', fontSize = 20)
      </script>
    {% endif %}
    
    {% if loginSuccess == 0 %}
      <script>
        createClosablePopup(message='No account found with those credentials!', targetID='closable-popup-container', color='#BC1F43', fontSize = 20)
      </script>
    {% endif %}

    {% if loggedOut == 1 %}
      <script>
        createClosablePopup(message='Successfully Logged Out!', targetID='closable-popup-container', color='#19E412', fontSize = 20)
      </script>
    {% endif %}

    {% if not_logged_in %}
      <script >
        createClosablePopup(message='You must be logged in to view that page!', targetID='closable-popup-container', color='#BC1F43', fontSize = 20);
      </script>
    {% endif %}

    {% if created_new_account == 1 %}
      <script >
        createClosablePopup(message='Account Created!', targetID='closable-popup-container', color='#19E412', fontSize = 20);
      </script>
    {% endif %}

  {% endblock %}
